{"ast":null,"code":"import axios from 'axios';\nexport default {\n  created() {\n    this.load();\n  },\n  methods: {\n    // deleteRow(index, rows) {\n    //   rows.splice(index, 1);\n    // },\n    details(index, rows) {\n      console.log(\"查看详情:\", index, rows);\n      var sex = rows[index].sex === 0 ? '女' : '男';\n      if (rows[index].status === 0) {\n        sex = '';\n      }\n      this.userDetails.name = rows[index].name;\n      this.userDetails.username = rows[index].username;\n      this.userDetails.phone = rows[index].phone;\n      this.userDetails.sex = sex;\n      if (rows[index].houseId === 0) {\n        // 是车位费\n        axios({\n          url: '/api/admin/fee/details/stop',\n          method: 'get',\n          params: {\n            stopId: rows[index].stopId\n          },\n          headers: {\n            token: this.$store.state.admin.token\n          }\n        }).then(res => {\n          // 成功回调函数再发请求\n          if (res.data.code == 1) {\n            // 成功\n            console.log(\"这是数据\", res.data.data);\n            this.stopDetails = res.data.data;\n            console.log(\"即将渲染数据\", this.stopDetails);\n          } else {\n            console.log(res.data.msg);\n          }\n        });\n      } else {\n        // 是物业费\n        axios({\n          url: '/api/admin/fee/details/house',\n          method: 'get',\n          params: {\n            houseId: rows[index].houseId\n          },\n          headers: {\n            token: this.$store.state.admin.token\n          }\n        }).then(res => {\n          // 成功回调函数再发请求\n          if (res.data.code == 1) {\n            // 成功\n            console.log(\"这是数据\", res.data.data);\n            this.houseDetails = res.data.data;\n            console.log(\"即将渲染数据\", this.houseDetails);\n          } else {\n            console.log(res.data.msg);\n          }\n        });\n      }\n    },\n    load() {\n      console.log('发请求前页数与大小', this.page, this.pageSize);\n      var feePageDTO = {\n        page: this.page,\n        pageSize: this.pageSize,\n        name: this.name,\n        typeId: this.typeId,\n        status: this.status\n      };\n      axios({\n        url: '/api/admin/fee/page',\n        method: 'post',\n        data: feePageDTO,\n        headers: {\n          token: this.$store.state.admin.token\n        }\n      }).then(res => {\n        // 成功回调函数再发请求\n        if (res.data.code == 1) {\n          // 成功\n          console.log(\"这是数据\", res.data.data);\n          this.total = res.data.data.total;\n          this.vo = res.data.data.records;\n          console.log(\"这是f数据\", this.total, this.vo);\n        } else {\n          console.log(res.data.msg);\n        }\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      // console.log(`每页 ${val} 条`);\n      console.log('每页', this.pageSize);\n      this.load();\n    },\n    handleCurrentChange(val) {\n      this.page = val;\n      console.log('页数', this.page);\n      // console.log(`当前页: ${val}`);\n      this.load();\n    },\n    search() {\n      this.load();\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(_ => {\n        done();\n      }).catch(_ => {});\n    }\n  },\n  data() {\n    return {\n      page: 1,\n      pageSize: 10,\n      name: '',\n      typeId: 0,\n      status: -1,\n      total: 0,\n      dialogVisible: false,\n      userDetails: {\n        name: '',\n        username: '',\n        phone: '',\n        sex: ''\n      },\n      houseDetails: {\n        building: 0,\n        cell: 0,\n        floor: 0,\n        doorplate: ''\n      },\n      stopDetails: {\n        place: ''\n      },\n      opStatus: [{\n        status: -1,\n        label: '全部'\n      }, {\n        status: 0,\n        label: '未缴费'\n      }, {\n        status: 1,\n        label: '已缴费'\n      }],\n      opType: [{\n        type: 0,\n        label: '全部'\n      }, {\n        type: 1,\n        label: '电费'\n      }, {\n        type: 2,\n        label: '水费'\n      }, {\n        type: 3,\n        label: '临时停车费'\n      }, {\n        type: 4,\n        label: '停车费'\n      }],\n      vo: []\n    };\n  }\n};","map":{"version":3,"names":["axios","created","load","methods","details","index","rows","console","log","sex","status","userDetails","name","username","phone","houseId","url","method","params","stopId","headers","token","$store","state","admin","then","res","data","code","stopDetails","msg","houseDetails","page","pageSize","feePageDTO","typeId","total","vo","records","handleSizeChange","val","handleCurrentChange","search","handleClose","done","$confirm","_","catch","dialogVisible","building","cell","floor","doorplate","place","opStatus","label","opType","type"],"sources":["src/views/admin/fee/fee.vue"],"sourcesContent":["<template>\r\n  <div>\r\n        <el-row class=\"search\">\r\n            <el-row class=\"tag\">业主姓名:</el-row>\r\n            <el-col :span=\"2\">\r\n               <el-input v-model=\"name\"  placeholder=\"请输入..\"></el-input>\r\n            </el-col>\r\n          \r\n            <div class=\"tag\">缴费类型:</div>\r\n            <el-select v-model=\"typeId\" placeholder=\"全部\">\r\n                <el-option\r\n                  v-for=\"item in opType\"\r\n                  :key=\"item.type\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.type\">\r\n                </el-option>\r\n            </el-select>\r\n  \r\n            <div class=\"tag\">状态:</div>\r\n            <el-select v-model=\"status\" placeholder=\"全部\">\r\n                <el-option\r\n                  v-for=\"item in opStatus\"\r\n                  :key=\"item.status\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.status\">\r\n                </el-option>\r\n            </el-select>\r\n            <el-col :span=\"2\">\r\n                <el-button class=\"seBT\" type=\"success\" @click=\"search\">搜索</el-button>\r\n            </el-col>\r\n        </el-row>\r\n  \r\n      <el-table\r\n      class=\"table\"\r\n      :data=\"this.vo\"\r\n      style=\"width: 100%\"\r\n      max-height=\"700px\">\r\n      <el-table-column\r\n        prop=\"name\"\r\n        label=\"业主姓名\"\r\n        width=\"230\">\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        prop=\"typeId\"\r\n        label=\"缴费类型\"\r\n        width=\"230\">\r\n        <template slot-scope=\"scope\">  \r\n          <span v-if=\"scope.row.typeId === 1\">电费</span>  \r\n          <span v-else-if=\"scope.row.typeId === 2\">水费</span>\r\n          <span v-else-if=\"scope.row.typeId === 3\">临时停车费</span> \r\n          <span v-else>租借车位费</span>    \r\n        </template> \r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        prop=\"amount\"\r\n        label=\"费用\"\r\n        width=\"230\">\r\n      </el-table-column>\r\n    \r\n      <el-table-column\r\n        prop=\"status\"\r\n        label=\"状态\"\r\n        width=\"230\">\r\n        <template slot-scope=\"scope\">  \r\n          <span v-if=\"scope.row.status === 0\">未缴费</span>  \r\n          <span v-else>已缴费</span>  \r\n        </template> \r\n      </el-table-column>\r\n  \r\n      <el-table-column\r\n        label=\"操作\"\r\n        width=\"230\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click.native.prevent=\"details(scope.$index, vo)\"\r\n            @click=\"dialogVisible = true\"\r\n            type=\"text\"\r\n            size=\"small\">\r\n            详情\r\n          </el-button>\r\n          <el-dialog\r\n            title=\"提示\"\r\n            :visible.sync=\"dialogVisible\"\r\n            width=\"30%\"\r\n            :before-close=\"handleClose\">   \r\n            <h1>姓名:{{userDetails.name}}</h1>\r\n            <h1>用户名:{{userDetails.username}}</h1>\r\n            <h1>手机号:{{userDetails.phone}}</h1>\r\n            <h1>性别:{{userDetails.sex}}</h1>\r\n            <h1 v-if=\"vo[scope.$index].stopId == 0\">\r\n              <h1>楼栋号:{{houseDetails.building}}</h1>\r\n              <h1>单元号:{{houseDetails.cell}}</h1>\r\n              <h1>楼层号:{{houseDetails.floor}}</h1>\r\n              <h1>门牌号:{{houseDetails.doorplate}}</h1>\r\n            </h1>\r\n            <h1 v-else>\r\n              <h1>车位信息:{{stopDetails.place}}</h1>\r\n            </h1>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\r\n            </span>\r\n          </el-dialog>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n        class=\"page\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :page-sizes=\"[5, 10, 15, 20]\"\r\n        :page-size=this.pageSize\r\n        :current-page=this.page\r\n        layout=\"total, sizes, prev, pager, next\"\r\n        :total= this.total>\r\n      </el-pagination>\r\n    \r\n  </div>\r\n  \r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios'\r\n    export default {\r\n  \r\n      created(){\r\n        this.load();\r\n      },\r\n  \r\n      methods: {\r\n        // deleteRow(index, rows) {\r\n        //   rows.splice(index, 1);\r\n        // },\r\n        details(index, rows) {\r\n          console.log(\"查看详情:\", index, rows)\r\n          var sex = rows[index].sex === 0 ? '女' : '男';\r\n          if(rows[index].status === 0){\r\n            sex = '';\r\n          }\r\n          this.userDetails.name = rows[index].name;\r\n          this.userDetails.username = rows[index].username;\r\n          this.userDetails.phone = rows[index].phone;\r\n          this.userDetails.sex = sex;\r\n          if(rows[index].houseId === 0){ // 是车位费\r\n            axios({\r\n              url: '/api/admin/fee/details/stop',\r\n              method: 'get',\r\n              params: {\r\n                stopId: rows[index].stopId\r\n              },\r\n              headers: {\r\n                token: this.$store.state.admin.token\r\n              }\r\n              }).then(res => { // 成功回调函数再发请求\r\n                if(res.data.code == 1){ // 成功\r\n                  console.log(\"这是数据\", res.data.data)\r\n                  this.stopDetails = res.data.data;\r\n                  console.log(\"即将渲染数据\", this.stopDetails)\r\n                }else{\r\n                  console.log(res.data.msg)\r\n                }\r\n            })\r\n          }else{ // 是物业费\r\n            axios({\r\n              url: '/api/admin/fee/details/house',\r\n              method: 'get',\r\n              params: {\r\n                houseId: rows[index].houseId\r\n              },\r\n              headers: {\r\n                token: this.$store.state.admin.token\r\n              }\r\n              }).then(res => { // 成功回调函数再发请求\r\n                if(res.data.code == 1){ // 成功\r\n                  console.log(\"这是数据\", res.data.data)\r\n                  this.houseDetails = res.data.data;\r\n                  console.log(\"即将渲染数据\", this.houseDetails)\r\n                }else{\r\n                  console.log(res.data.msg)\r\n                }\r\n            })\r\n          }\r\n        },\r\n  \r\n        load(){\r\n          console.log('发请求前页数与大小', this.page, this.pageSize)\r\n          var feePageDTO = {\r\n            page: this.page,\r\n            pageSize: this.pageSize,\r\n            name: this.name,\r\n            typeId: this.typeId,\r\n            status: this.status\r\n          }\r\n          axios({\r\n          url: '/api/admin/fee/page',\r\n          method: 'post',\r\n          data: feePageDTO,\r\n          headers: {\r\n            token: this.$store.state.admin.token\r\n          }\r\n          }).then(res => { // 成功回调函数再发请求\r\n            if(res.data.code == 1){ // 成功\r\n              console.log(\"这是数据\", res.data.data)\r\n              this.total = res.data.data.total;\r\n              this.vo = res.data.data.records;\r\n              console.log(\"这是f数据\", this.total, this.vo)\r\n            }else{\r\n              console.log(res.data.msg)\r\n            }\r\n          })\r\n        },\r\n  \r\n        handleSizeChange(val) {\r\n          this.pageSize = val;\r\n          // console.log(`每页 ${val} 条`);\r\n          console.log('每页', this.pageSize);\r\n          this.load();\r\n        },\r\n  \r\n        handleCurrentChange(val) {\r\n          this.page = val;\r\n          console.log('页数', this.page);\r\n          // console.log(`当前页: ${val}`);\r\n          this.load();\r\n        },\r\n  \r\n        search(){\r\n          this.load();\r\n        },\r\n  \r\n        handleClose(done) {\r\n          this.$confirm('确认关闭？')\r\n            .then(_ => {\r\n              done();\r\n            })\r\n            .catch(_ => {});\r\n        }\r\n      },\r\n  \r\n  \r\n      data() {\r\n        return {\r\n          page : 1,\r\n          pageSize: 10,\r\n          name: '',\r\n          typeId: 0,\r\n          status: -1,\r\n          total: 0,\r\n          dialogVisible: false,\r\n          userDetails:{\r\n            name: '',\r\n            username: '',\r\n            phone: '',\r\n            sex: ''\r\n          },\r\n          houseDetails:{\r\n            building: 0,\r\n            cell: 0,\r\n            floor: 0,\r\n            doorplate: ''\r\n          },\r\n          stopDetails:{\r\n              place: ''\r\n          },\r\n  \r\n          opStatus: [{\r\n            status: -1,\r\n            label: '全部'\r\n          }, {\r\n            status: 0,\r\n            label: '未缴费'\r\n          }, {\r\n            status: 1,\r\n            label: '已缴费'\r\n          }],\r\n          opType: [{\r\n            type: 0,\r\n            label: '全部'\r\n          },{ \r\n            type: 1,\r\n            label: '电费'\r\n          },{\r\n            type: 2,\r\n            label: '水费'\r\n          },{\r\n            type: 3,\r\n            label: '临时停车费'\r\n          },{\r\n            type: 4,\r\n            label: '停车费'\r\n          }],\r\n          vo: [],\r\n        }\r\n      }\r\n    }\r\n  </script>\r\n  \r\n  <style>\r\n    .search {\r\n      display: flex;\r\n      flex-wrap: wrap\r\n    }\r\n    .table{\r\n      padding-top: 10px;\r\n      margin-bottom: 10px;\r\n      margin-top: 10px;\r\n      min-height: 700px;\r\n      max-height: 700px\r\n    }\r\n    .seTag{\r\n      /*垂直居中 */\r\n      vertical-align: middle;\r\n      /*水平居中*/\r\n      text-align: center;\r\n    }\r\n    .tag{\r\n      font-size: 18px;\r\n      padding-top: 18px;\r\n      padding-left: 20px;\r\n      padding-right: 5px;\r\n    }\r\n    .seBT{\r\n      margin-top: 10px;\r\n    }\r\n    .el-table .cell {  \r\n      text-align: center;  \r\n    }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}