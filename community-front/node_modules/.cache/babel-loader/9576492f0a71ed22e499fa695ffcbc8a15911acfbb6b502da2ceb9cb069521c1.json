{"ast":null,"code":"import axios from 'axios';\nexport default {\n  created() {\n    this.load2();\n  },\n  methods: {\n    load2() {\n      let id = this.$store.state.user.id;\n      axios({\n        url: `/api/user/property/stop/${id}`,\n        method: 'get',\n        headers: {\n          token: this.$store.state.user.token\n        }\n      }).then(res => {\n        // 成功回调函数再发请求\n        if (res.data.code == 1) {\n          // 成功\n          console.log(\"成功!\", res.data.data);\n          this.vo2 = res.data.data;\n        } else {\n          this.$message(res.data.msg);\n        }\n      });\n    },\n    load() {\n      console.log('发请求前页数与大小', this.page, this.pageSize);\n      let stopPageDTO = {\n        page: this.page,\n        pageSize: this.pageSize,\n        name: '',\n        place: '',\n        carLicense: '',\n        status: 0\n      };\n      axios({\n        url: '/api/user/property/stop/page',\n        method: 'get',\n        params: stopPageDTO,\n        headers: {\n          token: this.$store.state.user.token\n        }\n      }).then(res => {\n        // 成功回调函数再发请求\n        if (res.data.code == 1) {\n          // 成功\n          console.log(\"这是数据\", res.data.data);\n          this.total = res.data.data.total;\n          this.vo = res.data.data.records;\n          this.dialogVisible = true;\n          console.log(\"这是f数据\", this.total, this.vo);\n        } else {\n          console.log(res.data.msg);\n        }\n      });\n    },\n    getCarLicense(index, rows) {\n      this.id = rows[index].id;\n      this.userId = this.$store.state.user.id;\n      this.status = 1;\n      var userCarPageDTO = {\n        page: 1,\n        pageSize: 10,\n        userId: this.$store.state.user.id\n      };\n      axios({\n        url: '/api/user/property/userCar/page',\n        method: 'get',\n        params: userCarPageDTO,\n        headers: {\n          token: this.$store.state.user.token\n        }\n      }).then(res => {\n        // 成功回调函数\n        if (res.data.code == 1) {\n          // 成功\n          console.log(\"这是数据\", res.data.data);\n          this.voCars = res.data.data.records;\n          this.carLicense = this.voCars[0];\n        } else {\n          console.log(res.data.msg);\n        }\n      });\n    },\n    buy() {\n      let dto = {\n        id: this.id,\n        userId: this.userId,\n        status: this.status,\n        carLicense: this.carLicense\n      };\n      axios({\n        url: '/api/user/property/stop/buy',\n        method: 'post',\n        data: dto,\n        headers: {\n          token: this.$store.state.user.token\n        }\n      }).then(res => {\n        // 成功回调函数再发请求\n        if (res.data.code == 1) {\n          // 成功\n          this.dialogVisible = false;\n          this.dialogVisible2 = false;\n          this.$message(\"租借成功\");\n          this.load2();\n        } else {\n          console.log(res.data.msg);\n        }\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      // console.log(`每页 ${val} 条`);\n      console.log('每页', this.pageSize);\n      this.load();\n    },\n    handleCurrentChange(val) {\n      this.page = val;\n      console.log('页数', this.page);\n      // console.log(`当前页: ${val}`);\n      this.load();\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    tableRowClassName({\n      row,\n      rowIndex\n    }) {\n      if (row.status === 0) {\n        return 'warning-row';\n      } else if (row.status === 1) {\n        return 'success-row';\n      }\n      return '';\n    }\n  },\n  data() {\n    return {\n      page: 1,\n      pageSize: 10,\n      id: 0,\n      userId: 0,\n      carLicense: '',\n      status: -1,\n      total: 0,\n      dialogVisible: false,\n      dialogVisible2: false,\n      vo: [],\n      vo2: [],\n      voCars: []\n    };\n  }\n};","map":{"version":3,"names":["axios","created","load2","methods","id","$store","state","user","url","method","headers","token","then","res","data","code","console","log","vo2","$message","msg","load","page","pageSize","stopPageDTO","name","place","carLicense","status","params","total","vo","records","dialogVisible","getCarLicense","index","rows","userId","userCarPageDTO","voCars","buy","dto","dialogVisible2","handleSizeChange","val","handleCurrentChange","handleClose","done","$confirm","_","catch","tableRowClassName","row","rowIndex"],"sources":["src/views/user/property/stop.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-col :span=\"2\">\r\n            <el-button class=\"seBT\" type=\"success\" @click=\"load\">租借</el-button>\r\n        </el-col>\r\n\r\n        <el-table\r\n            class=\"table\"\r\n            :data=\"this.vo2\"\r\n            style=\"width: 100%\"\r\n            :row-class-name=\"tableRowClassName\"\r\n            max-height=\"700px\">\r\n            <el-table-column\r\n            prop=\"place\"\r\n            label=\"位置\"\r\n            width=\"280\">\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n            prop=\"carLicense\"\r\n            label=\"车牌号\"\r\n            width=\"280\">\r\n            </el-table-column>               \r\n        </el-table>\r\n    \r\n        \r\n            <el-dialog\r\n              title=\"空闲车位\"\r\n              :visible.sync=\"dialogVisible\"\r\n              width=\"800px\"\r\n              :before-close=\"handleClose\">   \r\n\r\n                <el-table\r\n                    class=\"table\"\r\n                    :data=\"this.vo\"\r\n                    style=\"width: 700px\"\r\n                    :row-class-name=\"tableRowClassName\"\r\n                    max-height=\"700px\">\r\n                    <el-table-column\r\n                    prop=\"place\"\r\n                    label=\"位置\"\r\n                    width=\"280\">\r\n                    </el-table-column>\r\n\r\n                    <el-table-column\r\n                    prop=\"rentMonth\"\r\n                    label=\"月租费用\"\r\n                    width=\"280\">\r\n                    </el-table-column>\r\n                \r\n                    <el-table-column\r\n                    label=\"操作\"\r\n                    width=\"230\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                        @click.native.prevent=\"getCarLicense(scope.$index, vo)\"\r\n                        @click=\"dialogVisible2 = true\"\r\n                        type=\"text\"\r\n                        size=\"small\">\r\n                        租借\r\n                        </el-button>\r\n\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <el-pagination\r\n                    class=\"page\"\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :page-sizes=\"[5, 10, 15, 20]\"\r\n                    :page-size=this.pageSize\r\n                    :current-page=this.page\r\n                    layout=\"total, sizes, prev, pager, next\"\r\n                    :total= this.total>\r\n                    </el-pagination>\r\n              \r\n              <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                <!-- <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button> -->\r\n              </span>\r\n            </el-dialog>\r\n\r\n            <el-dialog\r\n              title=\"选择车牌号\"\r\n              :visible.sync=\"dialogVisible2\"\r\n              width=\"30%\"\r\n              :before-close=\"handleClose\">   \r\n\r\n              <el-select v-model=\"carLicense\" placeholder=carLicense>\r\n                <el-option\r\n                v-for=\"item in voCars\"\r\n                :key=\"item.carLicense\"\r\n                :label=\"item.carLicense\"\r\n                :value=\"item.carLicense\">\r\n                </el-option>\r\n            </el-select>\r\n\r\n              <el-button @click=\"dialogVisible2 = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"buy\">确 定</el-button>\r\n\r\n            </el-dialog>\r\n      \r\n    </div>\r\n    \r\n    </template>\r\n    \r\n    <script>\r\n    import axios from 'axios'\r\n      export default {\r\n    \r\n        created(){\r\n          this.load2();\r\n        },\r\n    \r\n        methods: {\r\n\r\n            load2(){\r\n                let id = this.$store.state.user.id;\r\n                axios({\r\n                    url: `/api/user/property/stop/${id}`,\r\n                    method: 'get',\r\n                    headers: {\r\n                        token: this.$store.state.user.token\r\n                    }\r\n                    }).then(res => { // 成功回调函数再发请求\r\n                    if(res.data.code == 1){ // 成功\r\n                        console.log(\"成功!\", res.data.data)\r\n                        this.vo2 = res.data.data\r\n                    }else{\r\n                        this.$message(res.data.msg)\r\n                    }\r\n                })\r\n            },\r\n    \r\n          load(){\r\n            console.log('发请求前页数与大小', this.page, this.pageSize)\r\n            let stopPageDTO = {\r\n              page: this.page,\r\n              pageSize: this.pageSize,\r\n              name: '',\r\n              place: '',\r\n              carLicense: '',\r\n              status: 0\r\n            }\r\n            axios({\r\n            url: '/api/user/property/stop/page',\r\n            method: 'get',\r\n            params: stopPageDTO,\r\n            headers: {\r\n              token: this.$store.state.user.token\r\n            }\r\n            }).then(res => { // 成功回调函数再发请求\r\n              if(res.data.code == 1){ // 成功\r\n                console.log(\"这是数据\", res.data.data)\r\n                this.total = res.data.data.total;\r\n                this.vo = res.data.data.records;\r\n                this.dialogVisible=true\r\n                console.log(\"这是f数据\", this.total, this.vo)\r\n              }else{\r\n                console.log(res.data.msg)\r\n              }\r\n            })\r\n          },\r\n\r\n\r\n        getCarLicense(index, rows){\r\n            this.id = rows[index].id;\r\n            this.userId = this.$store.state.user.id;\r\n            this.status = 1;\r\n            \r\n            var userCarPageDTO = {\r\n              page: 1,\r\n              pageSize: 10,\r\n              userId: this.$store.state.user.id\r\n            }\r\n            axios({\r\n            url: '/api/user/property/userCar/page',\r\n            method: 'get',\r\n            params: userCarPageDTO,\r\n            headers: {\r\n              token: this.$store.state.user.token\r\n            }\r\n            }).then(res => { // 成功回调函数\r\n              if(res.data.code == 1){ // 成功\r\n                console.log(\"这是数据\", res.data.data)\r\n                this.voCars = res.data.data.records;\r\n                this.carLicense = this.voCars[0];\r\n              }else{\r\n                console.log(res.data.msg)\r\n              }\r\n            })\r\n        },\r\n\r\n\r\n        buy() {\r\n            let dto = {\r\n                id : this.id,\r\n                userId : this.userId,\r\n                status : this.status,\r\n                carLicense: this.carLicense\r\n            }\r\n            axios({\r\n                url: '/api/user/property/stop/buy',\r\n                method: 'post',\r\n                data: dto,\r\n                headers: {\r\n                token: this.$store.state.user.token\r\n                }\r\n                }).then(res => { // 成功回调函数再发请求\r\n                if(res.data.code == 1){ // 成功\r\n                    this.dialogVisible = false;\r\n                    this.dialogVisible2 = false;\r\n                    this.$message(\"租借成功\")\r\n                    this.load2()\r\n                }else{\r\n                    console.log(res.data.msg)\r\n                }\r\n            })\r\n            \r\n          \r\n        },\r\n\r\n    \r\n          handleSizeChange(val) {\r\n            this.pageSize = val;\r\n            // console.log(`每页 ${val} 条`);\r\n            console.log('每页', this.pageSize);\r\n            this.load();\r\n          },\r\n    \r\n          handleCurrentChange(val) {\r\n            this.page = val;\r\n            console.log('页数', this.page);\r\n            // console.log(`当前页: ${val}`);\r\n            this.load();\r\n          },\r\n    \r\n          handleClose(done) {\r\n            this.$confirm('确认关闭？')\r\n              .then(_ => {\r\n                done();\r\n              })\r\n              .catch(_ => {});\r\n          },\r\n          tableRowClassName({row, rowIndex}) {\r\n            if (row.status === 0) {\r\n              return 'warning-row';\r\n            } else if (row.status === 1) {\r\n              return 'success-row';\r\n            }\r\n            return '';\r\n          }\r\n        },\r\n    \r\n    \r\n        data() {\r\n          return {\r\n            page : 1,\r\n            pageSize: 10,\r\n            id: 0,\r\n            userId: 0,\r\n            carLicense: '',\r\n            status: -1,\r\n            total: 0,\r\n            dialogVisible: false,\r\n            dialogVisible2: false,\r\n\r\n\r\n            vo: [],\r\n\r\n            vo2: [],\r\n\r\n            voCars: []\r\n          }\r\n        }\r\n      }\r\n    </script>\r\n    \r\n    <style>\r\n      .search {\r\n        display: flex;\r\n        flex-wrap: wrap\r\n      }\r\n      .table{\r\n        padding-top: 10px;\r\n        margin-bottom: 10px;\r\n        margin-top: 10px;\r\n        min-height: 700px;\r\n        max-height: 700px\r\n      }\r\n      .seTag{\r\n        /*垂直居中 */\r\n        vertical-align: middle;\r\n        /*水平居中*/\r\n        text-align: center;\r\n      }\r\n      .tag{\r\n        font-size: 18px;\r\n        padding-top: 18px;\r\n        padding-left: 20px;\r\n        padding-right: 5px;\r\n      }\r\n      .seBT{\r\n        margin-top: 10px;\r\n      }\r\n      .el-table .cell {  \r\n        text-align: center;  \r\n      }\r\n      .el-dialog{\r\n        /* background: transparent;\r\n        background-image: url('@/assets/login.png');\r\n        background-size: 100% 100%; */\r\n        background-color: #E9EEF3;\r\n        border-radius: 20px;\r\n      }\r\n      .el-table .warning-row {\r\n        background: oldlace;\r\n      }\r\n  \r\n      .el-table .success-row {\r\n       background: #f0f9eb;\r\n      }\r\n    </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}